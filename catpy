import argparse
import asyncio
import aiofiles
import time


async def sleep():
    await asyncio.sleep(3)
    return 1

async def catpy():
	start_time = time.monotonic()

	b = await sleep()

	parser = argparse.ArgumentParser(description='Read a file.')

	parser.add_argument(
		nargs='+',
		dest='files',
		help='unix "cat" operation')

	args = parser.parse_args()
	print(f"args: {args.files}")
	print('time: ', time.monotonic() - start_time)
	#print(f"first element: {args.files[0]}")

	for file_name in args.files:
		async with aiofiles.open(file_name, 'r') as w:
			async for data in w:
				print(data, end='')
		print('\n')

asyncio.run(catpy())
